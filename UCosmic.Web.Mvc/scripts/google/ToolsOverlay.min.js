var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},App;(function(n){(function(n){var t=function(){function n(){this.position=google.maps.ControlPosition.TOP_LEFT,this.elementId="map_tools",this.markerLatLng=undefined}return n}(),i;n.ToolsOverlayOptions=t,i=function(n){function i(i,r){typeof r=="undefined"&&(r=new t),n.call(this),this.map=i,this.setMap(this.map),this.position=r.position,this.elementId=r.elementId,this.$element=$("#"+this.elementId),this.element=this.$element[0],this.markerLatLng=r.markerLatLng,this.$markerReadyButton=this.$element.find(".marker img.ready-icon"),this.$markerPushedButton=this.$element.find(".marker img.pushed-icon"),this.init()}return __extends(i,n),i.prototype.draw=function(){},i.prototype.init=function(){var n=this;this.map.controls[this.position].push(this.element),this.markerLatLng?this.$markerReadyButton.hide():this.$markerPushedButton.hide();this.$markerReadyButton.on("click",this,function(t){n.createMarker(t)});this.$markerPushedButton.on("click",this,function(t){n.destroyMarker(t)});this.$element.show()},i.prototype.getCreatedMarkerLatLng=function(){var n=this.$element.position().left+this.$element.outerWidth()/2,t=this.$element.outerHeight(),i=new google.maps.Point(n,t),r=this.getProjection();return r.fromContainerPixelToLatLng(i)},i.prototype.putMarker=function(){},i.prototype.createMarker=function(){var n=this;this.$markerReadyButton.hide(),this.$markerPushedButton.show(),this.map.setOptions({draggableCursor:"pointer"}),this.marker=new google.maps.Marker({map:this.map,position:this.getCreatedMarkerLatLng(),cursor:"pointer",clickable:!1,icon:new google.maps.MarkerImage("/styles/icons/maps/tools-marker-new.png",new google.maps.Size(52,61),new google.maps.Point(0,0),new google.maps.Point(10,10))}),this.markerMoveListener=google.maps.event.addListener(this.map,"mousemove",function(t){n.marker.setPosition(t.latLng)}),this.markerDropListener=google.maps.event.addListenerOnce(this.map,"click",function(t){var i,r;google.maps.event.removeListener(n.markerMoveListener),n.map.setOptions({draggableCursor:undefined}),n.marker.setMap(undefined),i=new google.maps.OverlayView,i.setMap(n.map),r=i.getProjection().fromLatLngToContainerPixel(t.latLng),r.y+=43,t.latLng=i.getProjection().fromContainerPixelToLatLng(r),n.putMarker(t.latLng),$(n.map.getDiv()).trigger("marker_created",n)})},i.prototype.destroyMarker=function(){alert("clicked destroy")},i}(google.maps.OverlayView),n.ToolsOverlay=i})(n.GoogleMaps||(n.GoogleMaps={}));var t=n.GoogleMaps})(App||(App={}))