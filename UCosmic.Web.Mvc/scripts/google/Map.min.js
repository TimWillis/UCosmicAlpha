var App;(function(n){(function(n){var t=function(){function n(t,i,r){this._promise=$.Deferred(),this.idles=ko.observable(0),this.north=ko.observable(),this.south=ko.observable(),this.east=ko.observable(),this.west=ko.observable(),this._element=typeof t=="string"?document.getElementById(t):t,this._options=i||{},this._settings=r||{},this.zoom=ko.observable(this._options.zoom||this._options.zoom==0?this._options.zoom:1),this.lat=ko.observable(this._options.center?this._reducePrecision(this._options.center.lat()):n.defaultCenter.lat()),this.lng=ko.observable(this._options.center?this._reducePrecision(this._options.center.lng()):n.defaultCenter.lng()),(typeof this._settings.autoCreate=="undefined"||this._settings.autoCreate)&&this.ready()}return n.prototype.ready=function(){var n=this;return this.map||(this._create(),google.maps.event.addListenerOnce(this.map,"idle",function(){n._listenForCenterChange(),n._listenForZoomChange(),n._listenForBoundsChange(),n._listenForIdled(),n._boundsChanged(),n._promise.resolve()})),this._promise},n.prototype._create=function(){var t=this._options;t.center||(t.center=n.defaultCenter),t.zoom||(t.zoom=1),t.mapTypeId||(t.mapTypeId=google.maps.MapTypeId.ROADMAP),t.scrollwheel||(t.scrollwheel=!1),this.map=new google.maps.Map(this._element,t)},n.prototype._idled=function(){var n=this.idles();this.idles(++n)},n.prototype._listenForIdled=function(){var n=this;google.maps.event.addListener(this.map,"idle",function(){n._idled()})},n.prototype._zoomChanged=function(){var n=this.map.getZoom();this.zoom(n)},n.prototype._listenForZoomChange=function(){var n=this;google.maps.event.addListener(this.map,"zoom_changed",function(){n._zoomChanged()})},n.prototype._centerChanged=function(){var n=this.map.getCenter();this.lat(this._reducePrecision(n.lat())),this.lng(this._reducePrecision(n.lng()))},n.prototype._listenForCenterChange=function(){var n=this;google.maps.event.addListener(this.map,"center_changed",function(){n._centerChanged()})},n.prototype._boundsChanged=function(){var n=this.map.getBounds(),t=n.getNorthEast(),i=n.getSouthWest();this.north(this._reducePrecision(t.lat())),this.east(this._reducePrecision(t.lng())),this.south(this._reducePrecision(i.lat())),this.west(this._reducePrecision(i.lng()))},n.prototype._listenForBoundsChange=function(){var n=this;google.maps.event.addListener(this.map,"bounds_changed",function(){n._boundsChanged()})},n.prototype.triggerResize=function(){google.maps.event.trigger(this.map,"resize")},n.prototype._reducePrecision=function(n){var r=n,u=this._settings.maxPrecision,t,i,f;return u&&(t=n.toString(),i=t.indexOf("."),i>=0&&(f=t.substr(i,u+1),t=t.substr(0,i)+f,r=parseFloat(t))),r},n.defaultCenter=new google.maps.LatLng(0,0),n}();n.Map=t})(n.GoogleMaps||(n.GoogleMaps={}));var t=n.GoogleMaps})(App||(App={}))