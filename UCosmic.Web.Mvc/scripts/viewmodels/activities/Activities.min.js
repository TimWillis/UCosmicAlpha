var ViewModels;(function(n){(function(n){var t=function(){function n(){}return n}(),i;n.ActivitySearchInput=t,i=function(){function n(n){this.personId=n}return n.prototype.load=function(){var f=this,e=$.Deferred(),o=$.Deferred(),r,u,i;return $.get(App.Routes.WebApi.Activities.Locations.get()).done(function(n){o.resolve(n)}).fail(function(n,t,i){o.reject(n,t,i)}),r=$.Deferred(),$.get(App.Routes.WebApi.Employees.ModuleSettings.ActivityTypes.get()).done(function(n){r.resolve(n)}).fail(function(n,t,i){r.reject(n,t,i)}),u=$.Deferred(),i=new t,i.personId=this.personId,i.orderBy="",i.pageNumber=1,i.pageSize=App.Constants.int32Max,$.get(App.Routes.WebApi.Activities.get(),i).done(function(n){u.resolve(n)}).fail(function(n,t,i){u.reject(n,t,i)}),$.when(r,o,u).done(function(t,i,r){f.activityTypesList=t,f.activityLocationsList=i;var u=function(t){ko.mapping.fromJS(t,{},this),this.proxyImageSource=App.Routes.WebApi.Activities.Documents.Thumbnail.get(t.activityId,t.id,{maxSide:n.iconMaxSide})},o={documents:{create:function(n){return new u(n.data)}},startsOn:{create:function(n){return n.data!=null?ko.observable(moment(n.data).toDate()):ko.observable()}},endsOn:{create:function(n){return n.data!=null?ko.observable(moment(n.data).toDate()):ko.observable()}}};ko.mapping.fromJS(r,o,f),e.resolve()}).fail(function(n,t,i){e.reject(n,t,i)}),e},n.prototype.deleteActivity=function(n,t){var r=this,i=$("#confirmActivityDeleteDialog");i.dialog({dialogClass:"jquery-ui no-close",closeOnEscape:!1,width:"auto",resizable:!1,modal:!0,buttons:[{text:"Yes, confirm delete",click:function(){var u=i.parents(".ui-dialog").find("button");$.each(u,function(){$(this).attr("disabled","disabled")}),i.find(".spinner").css("visibility",""),$.ajax({type:"DELETE",url:App.Routes.WebApi.Activities.del(n.id())}).done(function(){i.dialog("close"),r.items.splice(t,1)}).fail(function(n){App.Failures.message(n,"while trying to delete your activity",!0)}).always(function(){$.each(u,function(){$(this).removeAttr("disabled")}),i.find(".spinner").css("visibility","hidden")})}},{text:"No, cancel delete",click:function(){i.dialog("close")},"data-css-link":!0}]})},n.prototype.editActivityUrl=function(n){return App.Routes.Mvc.My.Profile.activityEdit(n)},n.prototype.getLocationName=function(n){var i="",t;if(this.activityLocationsList!=null){for(t=0;t<this.activityLocationsList.length&&n!=this.activityLocationsList[t].id;)t+=1;t<this.activityLocationsList.length&&(i=this.activityLocationsList[t].officialName)}return i},n.prototype.activityDatesFormatted=function(n,t,i,r,u){var f="";return r=r!=null?r.toUpperCase():"MM/DD/YYYY",u=u!=null?u.toUpperCase():"MM/DD/YYYY",n==null?t!=null?f=moment(t).format(u):i&&(f="(Ongoing)"):(f=moment(n).format(r),i?f+=" (Ongoing)":t!=null&&(f+=" - "+moment(t).format(u))),f.length>0&&(f+="  "),f},n.prototype.activityTypesFormatted=function(n){for(var i="",r,t=0;t<this.activityTypesList.length;t+=1)for(r=0;r<n.length;r+=1)n[r].typeId()==this.activityTypesList[t].id&&(i.length>0&&(i+="; "),i+=this.activityTypesList[t].type);return i},n.prototype.activityLocationsFormatted=function(n){for(var i="",t=0;t<n.length;t+=1)t>0&&(i+=", "),i+=this.getLocationName(n[t].placeId());return i},n.prototype.getActivityTypeIconName=function(n){for(var t=0;t<this.activityTypesList.length&&this.activityTypesList[t].id!=n;)t+=1;return t<this.activityTypesList.length?this.activityTypesList[t].iconName:null},n.prototype.getActivityTypeToolTip=function(n){for(var t=0;t<this.activityTypesList.length&&this.activityTypesList[t].id!=n;)t+=1;return t<this.activityTypesList.length?this.activityTypesList[t].type:null},n.iconMaxSide=64,n}(),n.ActivityList=i})(n.Activities||(n.Activities={}));var t=n.Activities})(ViewModels||(ViewModels={}))