var Activities;(function(n){(function(n){var r=function(){function n(){}return n}(),t,i;n.ActivitySearchInput=r,t=function(){function n(){}return n.prototype.load=function(){var r=this,t=$.Deferred(),n=$("#activities_api").text();return n="{0}?{1}".format(n,$.param({pageSize:500,pageNumber:1})),$.ajax({url:n,cache:!1}).done(function(n){var u={items:{create:function(n){return new i(n.data,n.parent)}}};ko.mapping.fromJS(n,u,r),t.resolve()}),t},n.iconMaxSide=64,n}(),n.ActivityList=t,i=function(){function n(n,t){var i=this,r;this.editUrl=ko.computed(function(){var n=i.activityId();return $("#activity_edit").text().format(n)}),this.titleText=ko.computed(function(){var n=i.title();return n||"[Untitled Activity #{0}]".format(i.activityId())}),this.isDraft=ko.computed(function(){var n=i.mode();return n?n.toLowerCase()=="draft":!1}),this.isPublished=ko.computed(function(){var n=i.mode();return n?n.toLowerCase()=="public":!1}),this.datesText=ko.computed(function(){return i._computeDatesText()}),this._owner=t,n.types&&n.types.length&&(n.types=Enumerable.From(n.types).OrderBy(function(n){return n.rank}).ToArray()),r={},ko.mapping.fromJS(n,r,this)}return n.prototype.typeText=function(n){var i=this.types(),t=i[n].text();return n<i.length-1&&(t="{0}; ".format(t)),t},n.prototype.placeText=function(n){var i=this.places(),t=i[n].placeName();return n<i.length-1&&(t="{0}, ".format(t)),t},n.prototype.typeIcon=function(n){return $("#type_icon_api").text().format(n)},n.prototype.documentIcon=function(n){var i=$("#document_icon_api").text().format(this.activityId(),n),r={maxSide:t.iconMaxSide};return"{0}?{1}".format(i,$.param(r))},n.prototype._computeDatesText=function(){var u=this.startsOn(),n=this.endsOn(),t=this.startsFormat()||"M/D/YYYY",i=this.endsFormat()||"M/D/YYYY",f,r;return t=t.toUpperCase(),i=i.toUpperCase(),f=this.onGoing(),u?f?r="{0} (Ongoing)".format(moment(u).format(t)):n&&(r="{0} - {1}".format(moment(u).format(t),moment(n).format(i))):r=n?moment(n).format(i):"(Ongoing)",r},n.prototype.purge=function(){var t=this,n=$("#confirmActivityDeleteDialog");n.dialog({dialogClass:"jquery-ui no-close",closeOnEscape:!1,width:"auto",resizable:!1,modal:!0,buttons:[{text:"Yes, confirm delete",click:function(){var i=n.parents(".ui-dialog").find("button");$.each(i,function(){$(this).attr("disabled","disabled")}),n.find(".spinner").css("visibility",""),$.ajax({type:"DELETE",url:$("#activity_api").text().format(t.activityId())}).done(function(){n.dialog("close"),t._owner.items.remove(t)}).fail(function(n){App.Failures.message(n,"while trying to delete your activity",!0)}).always(function(){$.each(i,function(){$(this).removeAttr("disabled")}),n.find(".spinner").css("visibility","hidden")})}},{text:"No, cancel delete",click:function(){n.dialog("close")},"data-css-link":!0}]})},n}(),n.ActivityListItem=i})(n.ViewModels||(n.ViewModels={}));var t=n.ViewModels})(Activities||(Activities={}))