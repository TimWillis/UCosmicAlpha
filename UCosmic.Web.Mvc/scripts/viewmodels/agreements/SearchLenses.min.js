var Agreements;(function(n){(function(n){var t=function(){function t(i){var r=this,f,u;this.settings=i,this.lens=ko.observable(sessionStorage.getItem(t.LensSessionKey)||"map"),this.isTableLens=ko.computed(function(){return r.lens()==="table"}),this.isMapLens=ko.computed(function(){return r.lens()==="map"}),this.sammy=Sammy(),this._runSammy(),this.table=new n.SearchTable({element:undefined,domain:this.settings.domain,visibility:this.settings.visibility,route:"table",activationRoute:"#/table/",detailUrl:this.settings.detailUrl,sammy:this.sammy}),this.map=new n.SearchMap({element:undefined,domain:this.settings.domain,visibility:this.settings.visibility,route:"map",activationRoute:"#/map/",detailUrl:this.settings.detailUrl,sammy:this.sammy,partnerPlacesApi:this.settings.partnerPlacesApi,partnersApi:this.settings.partnersApi,graphicsCircleApi:this.settings.graphicsCircleApi,summaryApi:this.settings.summaryApi}),this.table.countryCode.subscribe(function(n){var t=r.map.countryCode();t!=n&&r.map.countryCode(n)}),this.map.countryCode.subscribe(function(n){var t=r.table.countryCode();t!=n&&r.table.countryCode(n)}),this.sammy.run(),f=this.sammy.getLocation(),u="#/{0}/".format(this.lens()),f.indexOf(u)<0&&this.sammy.setLocation(u)}return t.prototype._runSammy=function(){var n=this;this.sammy.get("#/:lens/",function(){var t=this;n._onRoute(t)})},t.prototype._onRoute=function(n){var t=n.params.lens;if(this.lens(t),this.isTableLens())this.table.onBeforeActivation(n);else if(this.isMapLens())this.map.onBeforeActivation(n)},t.LensSessionKey="AgreementSearchLens",t}();n.SearchLenses=t})(n.ViewModels||(n.ViewModels={}));var t=n.ViewModels})(Agreements||(Agreements={}))