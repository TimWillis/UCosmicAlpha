define(["require","exports","../amd-modules/Establishments/SearchResult","../amd-modules/Establishments/Search"],function(n,t,i,r){var o=i,s=r,u=o.SearchResult,f=s.Search,e=function(){function n(n){this.establishment=new u({id:1,officialName:"University of Cincinnati",translatedName:"University of Cincinnati",officialUrl:"www.uc.edu",countryName:"United States",countryCode:"asdf",uCosmicCode:"asdf",ceebCode:"asdf"},new f(!1)),this.isNotOwner=ko.computed(function(){return!1});n:!1;n:new u({id:1,officialName:"University of Cincinnati",translatedName:"University of Cincinnati",officialUrl:"www.uc.edu",countryName:"United States",countryCode:"asdf",uCosmicCode:"asdf",ceebCode:"asdf"},new f(!1));n:ko.computed(function(){return!n.isOwner})}return n}(),h=function(){function n(n){typeof n=="undefined"&&(n=!0),this.initDefaultPageRoute=n,this.isBound=ko.observable(),this.back=function(){history.back()},this.sideSwiper=new App.SideSwiper({speed:"",frameWidth:970,root:"[data-current-module=agreements]"}),this.participants=ko.observableArray(),this.owner=new f(!1),this.tenantDomain="uc.edu",this.trail=ko.observableArray([]),this.$itemsPage=undefined,this.nextForceDisabled=ko.observable(!1),this.prevForceDisabled=ko.observable(!1),this.pageNumber=ko.observable(),this.populateParticipants(),this.setupSearchVM(),this.isBound(!0),this.removeParticipant=this.removeParticipant.bind(this)}return n.prototype.populateParticipants=function(){var n=new e({isOwner:!0,establishment:new u({id:1,officialName:"University of Cincinnati",translatedName:"University of Cincinnati",officialUrl:"www.uc.edu",countryName:"United States",countryCode:"asdf",uCosmicCode:"asdf",ceebCode:"asdf"},this.owner)});this.tenantDomain==="usf.edu"&&(n.establishment=new u({id:1,officialName:"University of South Florida",translatedName:"University of South Florida",officialUrl:"www.usf.edu",countryName:"United States",countryCode:"asdf",uCosmicCode:"asdf",ceebCode:"asdf"},this.owner)),this.tenantDomain==="lehigh.edu"&&(n.establishment=new u({id:1,officialName:"Lehigh University",translatedName:"Lehigh University",officialUrl:"www.lehigh.edu",countryName:"United States",countryCode:"asdf",uCosmicCode:"asdf",ceebCode:"asdf"},this.owner)),this.tenantDomain==="umn.edu"&&(n.establishment=new u({id:1,officialName:"University of Minnesota",translatedName:"University of Minnesota",officialUrl:"www.umn.edu",countryName:"United States",countryCode:"asdf",uCosmicCode:"asdf",ceebCode:"asdf"},this.owner)),this.tenantDomain==="uc.edu"&&(n.establishment=new u({id:1,officialName:"University of Cincinnati",translatedName:"University of Cincinnati",officialUrl:"www.uc.edu",countryName:"United States",countryCode:"asdf",uCosmicCode:"asdf",ceebCode:"asdf"},this.owner)),this.tenantDomain==="suny.edu"&&(n.establishment=new u({id:1,officialName:"State University of New York",translatedName:"State University of New York",officialUrl:"www.suny.edu",countryName:"United States",countryCode:"asdf",uCosmicCode:"asdf",ceebCode:"asdf"},this.owner)),this.participants.push(n)},n.prototype.setupSearchVM=function(){var n=new f;n.nextPage=function(){if(n.nextEnabled()){var t=parseInt(n.pageNumber())+1;location.hash="/participants/add/page/"+t}},n.prevPage=function(){n.prevEnabled()&&history.back()},n.items.subscribe(function(n){if(n&&n.length)for(var t=0;t<n.length;t++)n[t].clickAction!==this.addParticipant&&(n[t].clickAction=this.addParticipant)})},n.prototype.removeParticipant=function(n,t){if(confirm('Are you sure you want to remove "'+n.translatedName()+'" as a participant from this agreement?')){var i=this;i.participants.remove(function(t){return t.establishment.id()===n.id()&&$(t.participantEl).slideUp("fast",function(){i.participants.remove(t)}),!1})}return t.preventDefault(),t.stopPropagation(),!1},n.prototype.addParticipant=function(n){var t=new e({isOwner:!1,establishment:n});this.participants.push(t),location.hash="#/"},n.prototype.swipeCallback=function(){},n.prototype.lockAnimation=function(){this.nextForceDisabled(!0),this.prevForceDisabled(!0)},n.prototype.unlockAnimation=function(){this.nextForceDisabled(!1),this.prevForceDisabled(!1)},n}();t.InstitutionalAgreementEditModel=h})