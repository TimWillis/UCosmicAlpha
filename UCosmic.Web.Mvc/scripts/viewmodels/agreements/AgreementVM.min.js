define(["require","exports","../amd-modules/Establishments/SearchResult","../amd-modules/Establishments/Search"],function(n,t,i,r){var o=i,f=r,e=f.Search,u=o.SearchResult,s=f.InstitutionalAgreementParticipantModel,h=function(){function n(n){typeof n=="undefined"&&(n=!0),this.initDefaultPageRoute=n;var t=this;this.isBound=ko.observable(),this.back=function(){history.back()},this.sideSwiper=new App.SideSwiper({speed:"",frameWidth:970,root:"[data-current-module=agreements]"}),this.owner=new e(!1),this.tenantDomain="uc.edu",this.establishmentSearchViewModel=new e,this.x=ko.observable().publishOn("test"),this.newParticipant=ko.observable().syncWith("participants",!0),this.participants=ko.observableArray(),this.trail=ko.observableArray([]),this.nextForceDisabled=ko.observable(!1),this.prevForceDisabled=ko.observable(!1),this.pageNumber=ko.observable(),this.populateParticipants(),this.isBound(!0),this.removeParticipant=this.removeParticipant.bind(this),this.addNewParticipant=ko.computed(function(){t.newParticipant()!==undefined&&t.participants.push(t.newParticipant())})}return n.prototype.populateParticipants=function(){var n=new s({isOwner:!0,establishment:new u({id:1,officialName:"University of Cincinnati",translatedName:"University of Cincinnati",officialUrl:"www.uc.edu",countryName:"United States",countryCode:"asdf",uCosmicCode:"asdf",ceebCode:"asdf"},this.owner),isNotOwner:!1});this.tenantDomain==="usf.edu"&&(n.establishment=new u({id:1,officialName:"University of South Florida",translatedName:"University of South Florida",officialUrl:"www.usf.edu",countryName:"United States",countryCode:"asdf",uCosmicCode:"asdf",ceebCode:"asdf"},this.owner)),this.tenantDomain==="lehigh.edu"&&(n.establishment=new u({id:1,officialName:"Lehigh University",translatedName:"Lehigh University",officialUrl:"www.lehigh.edu",countryName:"United States",countryCode:"asdf",uCosmicCode:"asdf",ceebCode:"asdf"},this.owner)),this.tenantDomain==="umn.edu"&&(n.establishment=new u({id:1,officialName:"University of Minnesota",translatedName:"University of Minnesota",officialUrl:"www.umn.edu",countryName:"United States",countryCode:"asdf",uCosmicCode:"asdf",ceebCode:"asdf"},this.owner)),this.tenantDomain==="uc.edu"&&(n.establishment=new u({id:1,officialName:"University of Cincinnati",translatedName:"University of Cincinnati",officialUrl:"www.uc.edu",countryName:"United States",countryCode:"asdf",uCosmicCode:"asdf",ceebCode:"asdf"},this.owner)),this.tenantDomain==="suny.edu"&&(n.establishment=new u({id:1,officialName:"State University of New York",translatedName:"State University of New York",officialUrl:"www.suny.edu",countryName:"United States",countryCode:"asdf",uCosmicCode:"asdf",ceebCode:"asdf"},this.owner)),this.participants.push(n)},n.prototype.removeParticipant=function(n,t){if(confirm('Are you sure you want to remove "'+n.translatedName()+'" as a participant from this agreement?')){var i=this;i.participants.remove(function(t){return t.establishment.id()===n.id()&&$(t.participantEl).slideUp("fast",function(){i.participants.remove(t)}),!1})}return t.preventDefault(),t.stopPropagation(),!1},n.prototype.addParticipant=function(){ko.applyBindings(this.establishmentSearchViewModel,$("#estSearch")[0]),this.establishmentSearchViewModel.sammy.run(),$("#allParticipants").fadeOut(500,function(){$("#estSearch").fadeIn(500)}),sessionStorage.setItem("Agreement","1")},n.prototype.swipeCallback=function(){},n.prototype.lockAnimation=function(){this.nextForceDisabled(!0),this.prevForceDisabled(!0)},n.prototype.unlockAnimation=function(){this.nextForceDisabled(!1),this.prevForceDisabled(!1)},n}();t.InstitutionalAgreementEditModel=h})