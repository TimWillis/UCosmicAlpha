var ViewModels;(function(n){(function(t){var i=function(){function i(i){var r=this;this.namesSpinner=new n.Spinner(new n.SpinnerOptions(0,!0)),this.urlsSpinner=new n.Spinner(new n.SpinnerOptions(0,!0)),this.id=0,this.genericAlertDialog=undefined,this.languages=ko.observableArray(),this.names=ko.observableArray(),this.editingName=ko.observable(),this.urls=ko.observableArray(),this.editingUrl=ko.observable(),this.id=i||0,ko.computed(function(){$.getJSON(App.Routes.WebApi.Languages.get()).done(function(t){var i=new n.Languages.ServerApiModel(undefined,"[Language Neutral]");t.splice(0,0,i),r.languages(t)})}).extend({throttle:1}),this.namesMapping={create:function(n){return new t.Name(n.data,r)}},ko.computed(function(){r.requestNames()}).extend({throttle:1}),this.urlsMapping={create:function(n){return new t.Url(n.data,r)}},ko.computed(function(){r.requestUrls()}).extend({throttle:1})}return i.prototype.requestNames=function(n){var t=this;this.namesSpinner.start(),$.get(App.Routes.WebApi.EstablishmentNames.get(this.id)).done(function(i){t.receiveNames(i),n&&n(i)})},i.prototype.receiveNames=function(n){ko.mapping.fromJS(n||[],this.namesMapping,this.names),this.namesSpinner.stop(),App.Obtruder.obtrude(document)},i.prototype.addName=function(){var n=new t.Name(null,this);this.names.unshift(n),n.showEditor(),App.Obtruder.obtrude(document)},i.prototype.requestUrls=function(n){var t=this;this.urlsSpinner.start(),$.get(App.Routes.WebApi.EstablishmentUrls.get(this.id)).done(function(i){t.receiveUrls(i),n&&n(i)})},i.prototype.receiveUrls=function(n){ko.mapping.fromJS(n||[],this.urlsMapping,this.urls),this.urlsSpinner.stop(),App.Obtruder.obtrude(document)},i.prototype.addUrl=function(){var n=new t.Url(null,this);this.urls.unshift(n),n.showEditor(),App.Obtruder.obtrude(document)},i}();t.Item=i})(n.Establishments||(n.Establishments={}));var t=n.Establishments})(ViewModels||(ViewModels={}))