var ViewModels;(function(n){(function(n){var t=function(){function n(n){this.inititializationErrors="",this.dirtyFlag=ko.observable(!1),this.saving=!1,this._initialize(n)}return n.prototype._initialize=function(n){var t=this;this.id=ko.observable(n),this.dirty=ko.computed(function(){t.dirtyFlag()&&t.autoSave(t,null)})},n.prototype.setupWidgets=function(){},n.prototype.setupValidation=function(){},n.prototype.load=function(){var i=this,n=$.Deferred(),t=$.Deferred();return $.ajax({type:"GET",url:App.Routes.WebApi.Degrees.get(this.id()),success:function(n){t.resolve(n)},error:function(n,i,r){t.reject(n,i,r)}}),$.when(t).done(function(t){ko.mapping.fromJS(t,{},i),n.resolve()}).fail(function(t,i,r){n.reject(t,i,r)}),n},n.prototype.autoSave=function(n){var t=this,i;this.saving||this.dirtyFlag()&&(i=ko.mapping.toJS(this),this.saving=!0,$.ajax({type:"PUT",url:App.Routes.WebApi.Degrees.put(n.id()),data:i,dataType:"json",success:function(){t.saving=!1,t.dirtyFlag(!1)},error:function(n,i,r){t.saving=!1,t.dirtyFlag(!1),alert(i+"; "+r)}}))},n.prototype.save=function(n,t,i){var r=this;for(this.autoSave(n,t);this.saving;)alert("Please wait while education is saved.");this.saving=!0,$.ajax({async:!1,type:"PUT",url:App.Routes.WebApi.Degrees.put(n.id()),data:ko.toJSON(i),dataType:"json",contentType:"application/json",success:function(){r.saving=!1,r.dirtyFlag(!1)},error:function(n,t,i){r.saving=!1,r.dirtyFlag(!1),alert(t+"; "+i)}}),location.href=App.Routes.Mvc.My.Profile.get()},n.prototype.cancel=function(n){$("#cancelConfirmDialog").dialog({modal:!0,resizable:!1,width:450,buttons:{"Do not cancel":function(){$(this).dialog("close")},"Cancel and lose changes":function(){$.ajax({async:!1,type:"DELETE",url:App.Routes.WebApi.Degrees.del(n.id()),dataType:"json",contentType:"application/json",success:function(){},error:function(n,t,i){alert(t+"; "+i)}}),$(this).dialog("close"),location.href=App.Routes.Mvc.My.Profile.get()}}})},n}();n.Degree=t})(n.Degrees||(n.Degrees={}));var t=n.Degrees})(ViewModels||(ViewModels={}))