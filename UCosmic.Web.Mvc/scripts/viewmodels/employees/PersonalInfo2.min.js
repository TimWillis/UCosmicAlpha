var ViewModels;(function(n){(function(n){var t=function(){function n(n,t){this._isInitialized=!1,this._isActive=ko.observable(),this._isDisplayNameDerived=ko.observable(),this._displayName=ko.observable(),this._userDisplayName="",this._salutations=ko.observableArray(),this._salutation=ko.observable(),this._firstName=ko.observable(),this._firstNameSubscription=null,this._middleName=ko.observable(),this._lastName=ko.observable(),this._lastNameSubscription=null,this._suffixes=ko.observableArray(),this._suffix=ko.observable(),this._workingTitle=ko.observable(),this._gender=ko.observable(),this._facultyRanks=ko.observableArray(),this._facultyRank=ko.observable(),this._administrativeAppointments=ko.observable(),this._picture=ko.observable(),this.$facultyRanks=ko.observable(),this.$nameSalutation=ko.observable(),this.$nameSuffix=ko.observable(),this._dataContext=t,this._initialize(n),this._setupKendoComboBoxes(),this._setupDisplayNameDerivation()}return n.prototype.GetRevisionId=function(){return this._revisionId},n.prototype.SetRevisionId=function(n){this._revisionId=n},n.prototype.GetIsActive=function(){return this._isActive()},n.prototype.SetIsActive=function(n){this._isActive(n)},n.prototype.GetIsDisplayNameDerived=function(){return this._isDisplayNameDerived()},n.prototype.SetIsDisplayNameDerived=function(n){this._isDisplayNameDerived(n)},n.prototype.GetDisplayName=function(){return this._displayName()},n.prototype.SetDisplayName=function(n){this._displayName(n)},n.prototype.GetSalutations=function(){return this._salutations()},n.prototype.SetSalutations=function(n){this._salutations(n)},n.prototype.Salutations_Add=function(n){this._salutations.push(n)},n.prototype.GetSalutation=function(){return this._salutation()},n.prototype.SetSalutation=function(n){this._salutation(n)},n.prototype.GetFirstName=function(){return this._firstName()},n.prototype.SetFirstName=function(n){this._firstName(n)},n.prototype.GetMiddleName=function(){return this._middleName()},n.prototype.SetMiddleName=function(n){this._middleName(n)},n.prototype.GetLastName=function(){return this._lastName()},n.prototype.SetLastName=function(n){this._lastName(n)},n.prototype.GetSuffixes=function(){return this._suffixes()},n.prototype.SetSuffixes=function(n){this._suffixes(n)},n.prototype.Suffixes_Add=function(n){this._suffixes.push(n)},n.prototype.GetSuffix=function(){return this._suffix()},n.prototype.SetSuffix=function(n){this._suffix(n)},n.prototype.GetWorkingTitle=function(){return this._workingTitle()},n.prototype.SetWorkingTitle=function(n){this._workingTitle(n)},n.prototype.GetGender=function(){return this._gender()},n.prototype.SetGender=function(n){this._gender(n)},n.prototype.GetFacultyRanks=function(){return this._facultyRanks()},n.prototype.SetFacultyRanks=function(n){this._facultyRanks(n)},n.prototype.FacultyRanks_Add=function(n){this._facultyRanks.push(n)},n.prototype.GetFacultyRank=function(){return this._facultyRank()},n.prototype.SetFacultyRank=function(n){this._facultyRank(n)},n.prototype.GetAdministrativeAppointments=function(){return this._administrativeAppointments()},n.prototype.SetAdministrativeAppointments=function(n){this._administrativeAppointments(n)},n.prototype.GetPicture=function(){return this._picture()},n.prototype.SetPicture=function(n){this._picture(n)},n.prototype._initialize=function(n){var t=this,u=this._dataContext.GetSalutations(),i,r;u.then(function(n){for(var i=0;i<n.length;i+=1)t.Salutations_Add(n[i])},function(){}),i=this._dataContext.GetSuffixes(),i.then(function(n){for(var i=0;i<n.length;i+=1)t.Suffixes_Add(n[i])},function(){}),r=this._dataContext.GetFacultyRanks(),r.then(function(n){for(var i=0;i<n.length;i+=1)t.FacultyRanks_Add(n[i])},function(){}),$.when(u,i,r).then(function(){t._dataContext.Get().then(function(i){t.ToViewModel(t,i),ko.applyBindings(t,$("#"+n).get(0)),t._isInitialized=!0,t.$facultyRanks().kendoDropDownList()},function(){})},function(){})},n.prototype.ToViewModel=function(n,t){var i=n,r;if(i.SetRevisionId(t.revisionId),i.SetIsActive(t.isActive),i.SetIsDisplayNameDerived(t.isDisplayNameDerived),i.SetDisplayName(t.displayName!=null?t.displayName:""),i.SetSalutation(t.salutation!=null?t.salutation:""),i.SetFirstName(t.firstName!=null?t.firstName:""),i.SetMiddleName(t.middleName!=null?t.middleName:""),i.SetLastName(t.lastName!=null?t.lastName:""),i.SetSuffix(t.suffix!=null?t.suffix:""),i.SetWorkingTitle(t.workingTitle!=null?t.workingTitle:""),i.SetGender(t.gender),t.employeeFacultyRank!=null){for(r=0;r<i.GetFacultyRanks().length&&i.GetFacultyRanks()[r].id!=t.employeeFacultyRank.id;)r+=1;r<i.GetFacultyRanks().length&&i.SetFacultyRank(i.GetFacultyRanks()[r])}else i.SetFacultyRank(null);i.SetAdministrativeAppointments(t.administrativeAppointments!=null?t.administrativeAppointments:""),i.SetPicture(t.picture)},n.prototype.FromViewModel=function(n){var t=n;return{revisionId:t.GetRevisionId(),isActive:t.GetIsActive(),isDisplayNameDerived:t.GetIsDisplayNameDerived(),displayName:t.GetDisplayName().length>0?t.GetDisplayName():null,salutation:t.GetSalutation().length>0?t.GetSalutation():null,firstName:t.GetFirstName().length>0?t.GetFirstName():null,middleName:t.GetMiddleName().length>0?t.GetMiddleName():null,lastName:t.GetLastName().length>0?t.GetLastName():null,suffix:t.GetSuffix().length>0?t.GetSuffix():null,workingTitle:t.GetWorkingTitle(),gender:t.GetGender(),employeeFacultyRank:t.GetFacultyRank()!=null?{id:t.GetFacultyRank().id,rank:t.GetFacultyRank().rank}:null,administrativeAppointments:t.GetAdministrativeAppointments().length>0?t.GetAdministrativeAppointments():null,picture:t.GetPicture()}},n.prototype.saveInfo=function(){this._dataContext.Put(this.FromViewModel(this)).then(function(){},function(){}),$("#accordion").accordion("activate",1)},n.prototype.savePicture=function(){$("#accordion").accordion("activate",0)},n.prototype._setupKendoComboBoxes=function(){this.$nameSalutation.subscribe(function(n){n&&n.length&&n.kendoComboBox({dataTextField:"text",dataValueField:"value",dataSource:new kendo.data.DataSource({transport:{read:{url:App.Routes.WebApi.People.Names.Salutations.get()}}})})}),this.$nameSuffix.subscribe(function(n){n&&n.length&&n.kendoComboBox({dataTextField:"text",dataValueField:"value",dataSource:new kendo.data.DataSource({transport:{read:{url:App.Routes.WebApi.People.Names.Suffixes.get()}}})})})},n.prototype._setupDisplayNameDerivation=function(){var n=this;this._displayName.subscribe(function(t){n._isDisplayNameDerived()||(n._userDisplayName=t)}),ko.computed(function(){if(n._isDisplayNameDerived()&&n._isInitialized){var t={salutation:n._salutation(),firstName:n._firstName(),middleName:n._middleName(),lastName:n._lastName(),salutation:n._salutation()};$.ajax({url:App.Routes.WebApi.People.Names.DeriveDisplayName.get(),type:"GET",cache:!1,data:t}).done(function(t){n._displayName(t)})}else n._isInitialized&&n._displayName(n._userDisplayName)}).extend({throttle:400})},n}();n.PersonalInfo2=t})(n.Employee||(n.Employee={}));var t=n.Employee})(ViewModels||(ViewModels={}))