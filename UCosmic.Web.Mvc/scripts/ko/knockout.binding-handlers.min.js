ko.bindingHandlers.element={update:function(n,t,i,r){var u=ko.utils.unwrapObservable(t());r[u]=n}},ko.bindingHandlers.jqElement={update:function(n,t,i,r){var u=ko.utils.unwrapObservable(t());r[u]=$(n)}},ko.bindingHandlers.jqObservableElement={update:function(n,t,i,r){var u=ko.utils.unwrapObservable(t());r[u]($(n))}},ko.bindingHandlers.multilineText={init:function(){return{controlsDescendantBindings:!0}},update:function(n,t){var i=ko.utils.unwrapObservable(t());i?(i=i.replace("\r\n","<br />").replace("\n\r","<br />").replace("\n","<br />").replace("\r","<br />"),ko.utils.setHtml(n,i)):ko.utils.setHtml(n,"")}},ko.bindingHandlers.slideDownVisible={update:function(n,t){var i=ko.utils.unwrapObservable(t());i&&!$(n).is(":visible")?$(n).slideDown("fast"):i||($(n).is(":animated")?$(n).hide():$(n).slideUp("fast"))}},ko.bindingHandlers.fadeVisible={update:function(n,t){var i=ko.utils.unwrapObservable(t()),r=!(n.style.display=="none");i&&!r?$(n).fadeIn():!i&&r&&$(n).fadeOut()}},function(n){var t={},i=n.Deferred(),r=i;i.resolve(),ko.bindingHandlers.tinymce={init:function(i,u,f){var c=arguments,h=f().tinymceOptions||{},e=u(),l=ko.utils.unwrapObservable(u()),a=n(i),o=["change"],s=f().valueUpdate;s&&(typeof s=="string"&&(s=[s]),ko.utils.arrayPushAll(o,s),o=ko.utils.arrayGetDistinctValues(o)),h.setup=function(t){t.onChange.add(function(n,t){ko.isWriteableObservable(e)&&e(t.content)});var i=function(n){ko.isWriteableObservable(e)&&(n.indexOf("after")==0?setTimeout(function(){e(t.getContent({format:"raw"}))},10):e(t.getContent({format:"raw"})))};n.each(o,function(n){var r=o[n];r.indexOf("keydown")>=0&&t.onKeyDown.add(function(){i(r)}),r.indexOf("keypress")>=0&&t.onKeyPress.add(function(){i(r)}),r.indexOf("keyup")>=0&&t.onKeyUp.add(function(){i(r)})}),t.onBeforeSetContent.add(function(n,t){ko.isWriteableObservable(e)&&e(t.content)}),t.onPaste.add(function(n){var t=n.getDoc();ko.isWriteableObservable(e)&&setTimeout(function(){e(n.getContent({format:"raw"}))},10)}),t.onInit.add(function(n){var t=n.getDoc();tinymce.dom.Event.add(t,"blur",function(){ko.isWriteableObservable(e)&&e(n.getContent({format:"raw"}))})})},ko.utils.domNodeDisposal.addDisposeCallback(i,function(){n(i).parent().find("span.mceEditor,div.mceEditor").each(function(n,i){var r=i.id.replace(/_parent$/,""),u=tinyMCE.get(r);u&&(u.remove(),t[r]&&delete t[r])})}),i.id||(i.id=tinyMCE.DOM.uniqueId()),r=r.pipe(function(){var r=n.Deferred(),u=n.extend({},h,{mode:"none",init_instance_callback:function(n){t[i.id]=n,ko.bindingHandlers.tinymce.update.apply(undefined,c),r.resolve(i.id),h.hasOwnProperty("init_instance_callback")&&h.init_instance_callback(n)}});return setTimeout(function(){tinyMCE.init(u),setTimeout(function(){tinyMCE.execCommand("mceAddControl",!0,i.id)},10)},10),r.promise()}),a.val(l)},update:function(i,r){var f=n(i),o=ko.utils.unwrapObservable(r()),u=f.attr("id"),e;u!==undefined&&u!==""&&t.hasOwnProperty(u)&&(e=t[u].getContent({format:"raw"}),(e!==o||e!==f.val())&&f.val(o))}}}(jQuery)