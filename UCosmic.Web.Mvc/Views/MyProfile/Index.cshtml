@{
    var customProfileTitle = "My UCosmic Profile";
    var tenancy = Request.Tenancy();
    if (tenancy != null && !string.IsNullOrWhiteSpace(tenancy.CustomProfileTitle))
    {
        customProfileTitle = tenancy.CustomProfileTitle;
    }
    ViewBag.Title = customProfileTitle;
}

@section styles
{
}

@section scripts
{
    @Scripts.Render("~/bundles/my/profile")

    <script type="text/javascript">

        $(function () {
            var profileViewModel = new ViewModels.My.Profile();
            $(profileViewModel).on('ready', function () {
                ko.applyBindings(profileViewModel, $('#my_profile')[0]);
            });
            $('#tabstrip').kendoTabStrip({
                animation: false
            })
            .show();

            //var emailAddressesViewModel = new ViewModels.My.EmailAddresses();
            //$(emailAddressesViewModel).on('ready', function () {
            //    ko.applyBindings(affiliationsViewModel, $('#my_email_addresses')[0]);
            //});

            //var affiliationsViewModel = new ViewModels.My.Affiliations();
            //$(affiliationsViewModel).on('ready', function () {
            //    ko.applyBindings(affiliationsViewModel, $('#my_affiliations')[0]);
            //});

        });

    </script>

}

@section bib
{
    <nav class="bib hide" data-current-bib="my">
        @Html.Partial(MVC.Home.Views._Bib)
    </nav>
}

<div class="content fixed to-top" data-current-module="home">
    <div data-side-swiper="root">
        <div data-side-swiper="deck">
            <div data-side-swiper="on">
                <div class="group">
                    <div class="on-left from-top" style="width: 100%;">
                        <header>
                            <h1>@ViewBag.Title</h1>
                        </header>
                        <div id="my_profile">
                            <section class="person-profile" data-bind="click: startEditing, css: { clickable: !editMode() }">
                                <div class="card">
                                    <div class="group">
                                        <div class="on-left photo">
                                            <img src="~/images/icons/user/unisex-a-128.png" alt="" data-bind="attr: { src: photoSrc }" />
                                        </div>
                                        <div class="on-left name-and-title">
                                            <div class="display-name" data-bind="text: displayName"></div>
                                            <div class="titles" data-bind="multilineText: jobTitles"></div>
                                            @if (User.IsInRole(RoleName.EmployeeProfileManager))
                                            {
                                                <div class="admin-only">
                                                    <em><span data-bind="text: genderText"></span>, <span data-bind="text: isActiveText"></span></em>
                                                </div>
                                            }
                                        </div>
                                        <div class="on-left faculty">
                                            <span class="branded-dark1 badge" style="display: none;" data-bind="text: facultyRankText, visible: isFacultyRankVisible"></span>
                                            <div class="appointments" data-bind="multilineText: administrativeAppointments">
                                                <br />
                                                <br />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="action">
                                    Click to edit
                                </div>
                            </section>
                            <section class="fieldset" style="display: none;" data-bind="jqElement: '$editSection'">
                                <fieldset class="no-sidebar">
                                    <legend>Edit @customProfileTitle</legend>
                                    @Html.Partial(MVC.MyProfile.Views._PersonalInfo)
                                </fieldset>
                            </section>
                        </div>
                        <div id="tabstrip" class="profile-tabs" style="display: none;">
                            <ul>
                                <li class="k-state-active">Activities</li>
                                <li>Geographic Expertise</li>
                                <li>Language Expertise</li>
                                <li>Formal Education</li>
                                <li>Affiliations</li>
                                <li>Email Addresses</li>
                            </ul>
                            <div>
                                <header>
                                    <h2>
                                        <span>Activities</span>
                                        <a href="#" title="Add a new activity" data-bind="click: addActivity">
                                            <img src="~/images/icons/plus/plus-24-green.png" alt="Add a new activity" />
                                        </a>
                                    </h2>
                                </header>
                                <div>
                                    <ul class="data-items">
                                        <li data-bind="css: { selected: editMode }">
                                            <table style="width: 100%; height: 96px">
                                                <tbody>
                                                    <tr>
                                                        <!-- image -->
                                                        <td>
                                                            <img src="~/images/placeholders/blue-96x96.png" alt="image" width="96" height="96" />
                                                        </td>
                                                        <!-- Description -->
                                                        <td>
                                                            <table>
                                                                <colgroup>
                                                                    <col style="width: 96px" />
                                                                </colgroup>
                                                                <tbody>
                                                                    <tr>
                                                                        <td>Research</td>
                                                                        <td>
                                                                            <span class="green badge" style="display: none;">Visible</span>
                                                                            <span class="blue badge" style="display: none;"></span>
                                                                            <span class="red badge" style="display: inline;">Draft</span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>Title</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>(DATE)</td>
                                                                        <td>(LOCATION)</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>
                                                        <!-- Remove Button -->
                                                        <td style="text-align: center; vertical-align: middle">
                                                            <a href="#" title="Remove activity" data-bind="click: deleteActivity">
                                                                <img src="~/images/icons/minus/minus-24-red.png" alt="Remove activity" />
                                                            </a>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </li>
                                    </ul>

                                </div>
                            </div>
                            <div>
                                My Geographic Expertise
                            </div>
                            <div>
                                My Language Expertise
                            </div>
                            <div>
                                My Formal Education Outside the U.S.
                            </div>
                            <div>
                                My Affiliations
                                @Html.Partial(MVC.MyProfile.Views._Affiliations)
                            </div>
                            <div>
                                My Email Addresses
                                @Html.Partial(MVC.MyProfile.Views._EmailAddresses)
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
