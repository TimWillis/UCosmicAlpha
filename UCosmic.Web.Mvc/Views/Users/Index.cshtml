@{
    ViewBag.Title = "Users";
}

@section bib
{
    <nav class="bib hide" data-current-bib="users">
        @Html.Partial(MVC.Admin.Views._Bib)
    </nav>
}

@section scripts
{

    <script type="text/javascript" src="~/scripts/app/Routes.js"></script>

    <script type="text/javascript" src="~/scripts/viewmodels/Spinner.js"></script>

    <script type="text/javascript" src="~/scripts/viewmodels/PagedSearch.js"></script>

    <script type="text/javascript" src="~/scripts/viewmodels/users/Search.js"></script>

    <script type="text/javascript">
        var viewModel = new ViewModels.Users.Search();
        ko.applyBindings(viewModel, $('[data-current-module=admin]')[0]);
        viewModel.sammy.run();
    </script>

}

<div class="content fixed to-top" data-current-module="admin">
    <form class="group">
        <input type="hidden" data-bind="jqObservableElement: '$historyJson'" />
        <div class="on-left from-top">
            <header>
                <h1>
                    @ViewBag.Title
                </h1>
            </header>
            <div class="field" style="margin-bottom: 0;">
                <input type="hidden" data-bind="value: keyword" />
                <input type="search" placeholder="Enter a user name, email address, or access grant" data-bind="value: keyword, valueUpdate: 'afterkeydown search'" />
            </div>
            <p data-bind="visible: hasNoItems" style="display: none;">
                There are no results that match your search terms.
            </p>
            <p data-bind="visible: spinner.isVisible">
                <img src="~/images/icons/spinner/spinner-20-blue.gif" alt="" />
                <strong>Loading search results...</strong>
            </p>
            <p data-bind="visible: showStatus" style="display: none;">
                <strong>Showing <span data-bind="text: firstNumber"></span>
                    <span data-bind="visible: hasManyItems">- <span data-bind="    text: lastNumber"></span></span>
                    of <span data-bind="text: itemTotal"></span></strong>
                <span data-bind="visible: hasManyPages">(page
                    @*<select class="inline" data-bind="options: pageNumberOptions, value: selectedPageNumber">
                    </select>*@
                    <span data-bind="text: transitionedPageNumber"></span>
                    of <span data-bind="text: pageCount"></span>)</span>
            </p>
            <ol data-bind="foreach: items, visible: hasItems" style="display: none;">
                <li>
                    <div class="group">
                        <div class="on-left">
                            <img src="~/images/icons/user/unisex-a-128.png" alt="" data-bind="attr: { src: photoSrc }" />
                        </div>
                        <div class="on-left" style="margin-left: 8px; width: 580px;">
                            <div>
                                <span data-bind="text: name" style="font-weight: bold; font-size: 18px;"></span>
                                <span data-bind="visible: hasUniqueDisplayName">- <span data-bind="    text: personDisplayName" style="font-weight: normal; font-size: 18px;"></span>
                                </span>
                            </div>
                            <div style="margin-top: 2px;">
                                <span class="branded-dark1 badge" data-bind="visible: hasNoRoles" style="display: none; margin-top: 2px; margin-bottom: 2px; margin-left: 0;">[No access grants]</span>
                                <span data-bind="visible: hasRoles, foreach: roleGrants">
                                    <span class="branded-dark1 badge" data-bind="text: roleName" style="margin-top: 2px; margin-bottom: 2px; margin-left: 0;"></span>
                                </span>
                                @*<ol data-bind="visible: hasRoles, foreach: roleGrants">
                                    <li>
                                        <span class="branded-dark1 badge" data-bind="text: roleName"></span>
                                    </li>
                                </ol>*@
                            </div>
                        </div>
                    </div>
                    <hr />
                </li>
            </ol>
        </div>
        <aside class="on-right from-top" data-fixed-scroll="root">
            <div data-fixed-scroll="anchor"></div>
            <div data-fixed-scroll="content">
                @Html.Partial(MVC.Users.Views._SearchSideBar)
            </div>
        </aside>
    </form>
</div>
