@using UCosmic.Domain.People

@{
    var customProfileTitle = "My UCosmic Profile";
    var tenancy = Request.Tenancy();
    if (tenancy != null && !string.IsNullOrWhiteSpace(tenancy.CustomProfileTitle))
    {
        customProfileTitle = tenancy.CustomProfileTitle;
    }
    ViewBag.Title = customProfileTitle;
}

@section styles
{
}

@section scripts
{
    @Scripts.Render("~/bundles/people")

    <script type="text/javascript">

        $(function () {
            // Doug: I renamed your PersonalInfo3.ts to PersonalInfo.ts, since your new changes broke that file anyway.
            var viewModel = new ViewModels.Employee.PersonalInfo("employeePersonalInfo", new DataContext.EmployeeWebService(@ViewBag.PersonId));
            //var viewModel = new ViewModels.Employee.PersonalInfo2("employeePersonalInfo", new DataContext.EmployeeWebService(@ViewBag.PersonId));
            var dataContext = new DataContext.PeopleWebService(@ViewBag.PersonId);
            var personalInfoVM = new ViewModels.People.PersonalInfo3("peoplePersonalInfo", dataContext);
            var emailAddressesVM = new ViewModels.People.EmailAddresses("peopleEmailAddresses", dataContext);
            //var affiliationsVM = new ViewModels.People.Affiliations("peopleAffiliations", dataContext);
            //var picturesVM = new ViewModels.People.Pictures("peoplePictures", dataContext);

            $("#accordion").accordion();
            $("#accordion").removeClass("ui-widget");
        });

    </script>

}


@section bib
{
    <nav class="bib hide" data-current-bib="people">
        @Html.Partial(MVC.Admin.Views._Bib)
    </nav>
}

<div id="peoplePersonalInfo" class="content fixed to-top" data-current-module="home">
    <div data-side-swiper="root">
        <div data-side-swiper="deck">
            <div data-side-swiper="on">
                <div class="group">
                    <div class="on-left from-top" style="width: 100%;">
                        <header>
                            <h1>@ViewBag.Title</h1>
                        </header>
                        <div class="person-profile clickable">
                            <div class="card">
                                <div class="group">
                                    <div class="on-left photo">
                                        @*<img src="~/images/icons/user/unisex-a-128.png" alt="" />*@
                                        <img src="~/images/samples/sample-photo-128.jpg" alt="" />
                                    </div>
                                    <div class="on-left name-and-title">
                                        <div class="display-name" data-bind="text: _displayName"></div>
                                        <div class="titles" data-bind="multilineText: _jobTitles"></div>
                                        @if (User.IsInRole(RoleName.EmployeeProfileManager))
                                        {
                                            <div class="admin-only">
                                                <em>Male, Inactive</em>
                                            </div>
                                        }
                                    </div>
                                    <div class="on-left faculty">
                                        <span class="branded-dark1 badge">Distinguished Professor</span>
                                        <div class="appointments">
                                            Senior Advisor on Academic Affairs, United Nations Global Compact (UNGC)
                                            <br/>
                                            Vice President & Treasurer, American International Recruitment Council (AIRC)
                                            <br/>
                                            Executive Director, UCosmic Consortium
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="action">
                                Click to edit
                            </div>
                        </div>
                        <div id="accordion" style="">
                            <h2>My Information</h2>
                            <div class="fieldset">
                                <form data-bind="submit: saveInfo">
                                    <div class="field-table w690-l250-v440">
                                        <div class="field-row">
                                            <div class="field-label" style="padding-top: 0;">
                                                <img src="~/images/samples/sample-photo-128.jpg" alt="" />
                                            </div>
                                            <div class="field-input">
                                                <input type="file" name="photo" data-bind="jqObservableElement: '$photo'" />
                                            </div>
                                        </div>
                                        <div class="field-row above-unlabeled-row">
                                            <div class="field-label">
                                                <label>Display name</label>
                                            </div>
                                            <div class="field-input">
                                                <input id="displayName" type="text" data-bind="value: _displayName, valueUpdate: 'afterkeydown', attr: { disabled: _isDisplayNameDerived }" />
                                            </div>
                                        </div>
                                        <div class="field-row">
                                            <div class="field-unlabeled-input">
                                                <label>
                                                    @*<input type="checkbox" data-bind="checked: _isDisplayNameDerived, click: derivedNameClickHandler" />*@
                                                    <input type="checkbox" data-bind="checked: _isDisplayNameDerived" />
                                                    Automatically generate my display name based on the fields below.
                                                </label>
                                            </div>
                                        </div>
                                        <div class="field-row">
                                            <div class="field-label">
                                                <label>Salutation</label>
                                            </div>
                                            <div class="field-input">
                                                <input id="salutationTextbox" type="text" data-bind="value: _salutation, valueUpdate: 'afterkeydown', jqObservableElement: '$nameSalutation'" />
                                            </div>
                                        </div>
                                        <div class="field-row">
                                            <div class="field-label">
                                                <label>First name</label>
                                            </div>
                                            <div class="field-input">
                                                <input type="text" data-bind="value: _firstName, valueUpdate: 'afterkeydown'" />
                                            </div>
                                        </div>
                                        <div class="field-row">
                                            <div class="field-label">
                                                <label>Middle name</label>
                                            </div>
                                            <div class="field-input">
                                                <input type="text" data-bind="value: _middleName, valueUpdate: 'afterkeydown'" />
                                            </div>
                                        </div>
                                        <div class="field-row">
                                            <div class="field-label">
                                                <label>Last name</label>
                                            </div>
                                            <div class="field-input">
                                                <input type="text" data-bind="value: _lastName, valueUpdate: 'afterkeydown'" />
                                            </div>
                                        </div>
                                        <div class="field-row">
                                            <div class="field-label">
                                                <label>Suffix</label>
                                            </div>
                                            <div class="field-input">
                                                <input id="suffixTextbox" type="text" data-bind="value: _suffix, valueUpdate: 'afterkeydown', jqObservableElement: '$nameSuffix'" />
                                            </div>
                                        </div>
                                        <div class="field-row">
                                            <div class="field-label">
                                                <label>Faculty rank</label>
                                            </div>
                                            <div class="field-input">
                                                <select id="facultyRankSelector" data-bind="options: _facultyRanks, optionsText: 'rank', optionsValue: 'id', value: _facultyRankId, optionsCaption: '[Unknown]', jqObservableElement: '$facultyRanks'">
                                                </select>
                                            </div>
                                        </div>
                                        <div class="field-row">
                                            <div class="field-label">
                                                <label>My Preferred Title is</label>
                                            </div>
                                            <div class="field-input">
                                                <textarea rows="2" data-bind="value: _jobTitles"></textarea>
                                            </div>
                                        </div>
                                        <div class="field-row">
                                            <div class="field-label">
                                                <label>Administrative Appointments</label>
                                            </div>
                                            <div class="field-input">
                                                <textarea rows="2" data-bind="value: _administrativeAppointments"></textarea>
                                            </div>
                                        </div>
                                        @if (User.IsInRole(RoleName.EmployeeProfileManager))
                                        {
                                            <div class="field-row">
                                                <div class="field-label">
                                                    <label>Gender</label>
                                                </div>
                                                <div class="field-input for-checkables">
                                                    <label>
                                                        <input type="radio" name="genderGroup" value="@PersonGender.Male" data-bind="checked: _gender" />
                                                        <span>Male</span>
                                                    </label>
                                                    &nbsp;&nbsp;&nbsp;
                                                    <label>
                                                        <input type="radio" name="genderGroup" value="@PersonGender.Female" data-bind="checked: _gender" />
                                                        <span>Female</span>
                                                    </label>
                                                    &nbsp;&nbsp;&nbsp;
                                                    <label>
                                                        <input type="radio" name="genderGroup" value="@PersonGender.NonDisclosed" data-bind="checked: _gender" />
                                                        <span>Undisclosed</span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="field-row">
                                                <div class="field-unlabeled-input">
                                                    <label>
                                                        <input type="checkbox" data-bind="checked: _isActive" />
                                                        This profile is currently active.
                                                    </label>
                                                </div>
                                            </div>
                                        }
                                        <div class="field-row">
                                            <div class="field-unlabeled-input">
                                                <input type="submit" value="Save" />
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>

                            <h2>My Email Addresses</h2>
                            <div class="fieldset">
                                @Html.Partial(MVC.People.Views._EmailAddresses)
                            </div>

                            <h2>My Affiliations</h2>
                            <div class="fieldset">
                                @Html.Partial(MVC.People.Views._Affiliations)
                            </div>

                            <h2>My Picture</h2>
                            <div class="fieldset">
                                @Html.Partial(MVC.People.Views._Pictures)
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


