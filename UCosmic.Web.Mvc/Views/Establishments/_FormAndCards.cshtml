<form method="POST" data-bind="submit: submitToCreate, validationOptions: { decorateElement: true, errorClass: 'error' }">
    <div data-side-swiper="root">
        <div data-side-swiper="deck">
            <div data-side-swiper="on" class="left">
                @Html.Partial(MVC.Establishments.Views._FormNamesSection)
                @Html.Partial(MVC.Establishments.Views._FormUrlsSection)
                @Html.Partial(MVC.Establishments.Views._FormLocationSection)
                <section class="fieldset">
                    <header>
                        <h2>
                            <span>Classification &amp; Identifier Codes</span>
                            <a href="#/" title="Edit classification & identifier codes" data-bind="visible: !isEditingTypeId(), click: clickToEditTypeId" style="display: none;">
                                <img src="~/images/icons/edit/pencil-a-24.png" alt="Edit classification & identifier codes" />
                            </a>
                        </h2>
                    </header>
                    <div class="field-table w690-l190-v500">
                        <div class="field-row">
                            <div class="field-label">
                                <label>Classification</label>
                            </div>
                            <div class="field-input">
                                <div class="text-box when-hovered" data-bind="text: typeText, click: clickToEditTypeId, visible: !isEditingTypeId()"></div>
                                <select data-bind="foreach: categories, value: typeId, visible: isEditingTypeId" style="display: none;">
                                    <option data-bind="visible: $index() == 0 && !$parent.id, text: $parent.typeEmptyText" style="display: none;" value="">[Loading...]</option>
                                    <optgroup label="" data-bind="attr: { label: text }, foreach: types">
                                        <option data-bind="attr: { value: id }, text: text"></option>
                                    </optgroup>
                                </select>
                            </div>
                        </div>
                        <div class="field-row">
                            <div class="field-label">
                                <label>CEEB Code</label>
                            </div>
                            <div class="field-input">
                                <div class="text-box when-hovered" data-bind="text: ceebCode() || '[None]', click: clickToEditTypeId, visible: !isEditingTypeId()"></div>
                                <input type="text" data-bind="value: ceebCode, valueUpdate: 'afterkeydown', visible: isEditingTypeId" placeholder="[None]" style="display: none;" />
                            </div>
                        </div>
                        <div class="field-row">
                            <div class="field-label">
                                <label>UCosmic Code</label>
                            </div>
                            <div class="field-input">
                                <div class="text-box when-hovered" data-bind="text: uCosmicCode() || '[None]', click: clickToEditTypeId, visible: !isEditingTypeId()"></div>
                                <input type="text" data-bind="value: uCosmicCode, valueUpdate: 'afterkeydown', visible: isEditingTypeId" placeholder="[None]" style="display: none;" />
                            </div>
                        </div>
                        <div class="field-row" data-bind="visible: id && isEditingTypeId" style="display: none;">
                            <div class="field-unlabeled-input">
                                <input type="button" value="Save" data-bind="click: clickToSaveTypeId, attr: { disabled: typeIdSaveSpinner.isVisible() || typeIdValidatingSpinner.isVisible() }" />
                                &nbsp;&nbsp;&nbsp;
                                <a href="#/" data-bind="click: clickToCancelTypeIdEdit">Cancel</a>
                                &nbsp;&nbsp;&nbsp;
                                <img src="~/images/icons/spinner/spinner-20-blue.gif" alt="" data-bind="visible: typeIdSaveSpinner.isVisible" />
                                <strong data-bind="visible: typeIdSaveSpinner.isVisible">Saving...</strong>
                                <img src="~/images/icons/spinner/spinner-20-blue.gif" alt="" data-bind="visible: typeIdValidatingSpinner.isVisible" />
                                <strong data-bind="visible: typeIdValidatingSpinner.isVisible">Validating...</strong>
                            </div>
                        </div>
                    </div>
                </section>
                <section class="fieldset">
                    <header>
                        <h2>
                            <span>Parent Organization</span>
                            <a href="#/parent/page/1/" title="Edit parent organization" data-xbind="visible: !isEditingTypeId(), click: clickToDoSomething" style="xdisplay: none;">
                                <img src="~/images/icons/edit/pencil-a-24.png" alt="Edit parent organization" />
                            </a>
                        </h2>
                    </header>
                    <div class="field-table w690-l190-v500">
                        <div class="field-row">
                            <div class="field-label">
                                <label>Field #1</label>
                            </div>
                            <div class="field-input">
                                <div class="text-box when-hovered" data-xbind="text: typeText, click: clickToEditTypeId, visible: !isEditingTypeId()"></div>
                                <select data-xbind="foreach: categories, value: typeId, visible: isEditingTypeId" style="display: none;">
                                    <option data-xbind="visible: $index() == 0 && !$parent.id, text: $parent.typeEmptyText" style="display: none;" value="">[Loading...]</option>
                                    <optgroup label="" data-xbind="attr: { label: text }, foreach: types">
                                        <option data-xbind="attr: { value: id }, text: text"></option>
                                    </optgroup>
                                </select>
                            </div>
                        </div>
                        <div class="field-row">
                            <div class="field-label">
                                <label>Field #2</label>
                            </div>
                            <div class="field-input">
                                <div class="text-box when-hovered" data-xbind="text: ceebCode() || '[None]', click: clickToEditTypeId, visible: !isEditingTypeId()"></div>
                                <input type="text" data-xbind="value: ceebCode, valueUpdate: 'afterkeydown', visible: isEditingTypeId" placeholder="[None]" style="display: none;" />
                            </div>
                        </div>
                        <div class="field-row">
                            <div class="field-label">
                                <label>Field #3</label>
                            </div>
                            <div class="field-input">
                                <div class="text-box when-hovered" data-xbind="text: uCosmicCode() || '[None]', click: clickToEditTypeId, visible: !isEditingTypeId()"></div>
                                <input type="text" data-xbind="value: uCosmicCode, valueUpdate: 'afterkeydown', visible: isEditingTypeId" placeholder="[None]" style="display: none;" />
                            </div>
                        </div>
                        <div class="field-row" data-xbind="visible: id && isEditingTypeId" style="display: none;">
                            <div class="field-unlabeled-input">
                                <input type="button" value="Save" data-xbind="click: clickToSaveTypeId, attr: { disabled: typeIdSaveSpinner.isVisible() || typeIdValidatingSpinner.isVisible() }" />
                                &nbsp;&nbsp;&nbsp;
                                <a href="#/cancel-classification-edit/" data-xbind="click: clickToCancelTypeIdEdit">Cancel</a>
                                &nbsp;&nbsp;&nbsp;
                                <img src="~/images/icons/spinner/spinner-20-blue.gif" alt="" data-xbind="visible: typeIdSaveSpinner.isVisible" />
                                <strong data-xbind="visible: typeIdSaveSpinner.isVisible">Saving...</strong>
                                <img src="~/images/icons/spinner/spinner-20-blue.gif" alt="" data-xbind="visible: typeIdValidatingSpinner.isVisible" />
                                <strong data-xbind="visible: typeIdValidatingSpinner.isVisible">Validating...</strong>
                            </div>
                        </div>
                    </div>
                </section>
                <section class="fieldset">
                    <div>
                        <input type="submit" value="Save" data-bind="visible: !id, attr: { disabled: createSpinner.isVisible }" />
                        &nbsp;&nbsp;&nbsp;
                        <img src="~/images/icons/spinner/spinner-20-blue.gif" alt="" data-bind="visible: validatingSpinner.isVisible" />
                        <strong data-bind="visible: validatingSpinner.isVisible">Validating...</strong>
                        &nbsp;&nbsp;&nbsp;
                        <img src="~/images/icons/spinner/spinner-20-blue.gif" alt="" data-bind="visible: createSpinner.isVisible" />
                        <strong data-bind="visible: createSpinner.isVisible">Saving...</strong>
                    </div>
                </section>
                <section class="fieldset" data-bind="visible: isValidationSummaryVisible() && errors().length">
                    <div class="validation-summary">
                        <h3>Please correct the following and try again:</h3>
                        <div data-bind="foreach: names">
                            <ol data-bind="foreach: errors">
                                <li><span class="validationMessage" data-bind="text: $data"></span></li>
                            </ol>
                        </div>
                        <div data-bind="foreach: urls">
                            <ol data-bind="foreach: errors">
                                <li><span class="validationMessage" data-bind="text: $data"></span></li>
                            </ol>
                        </div>
                        <ol data-bind="foreach: errors">
                            <li><span class="validationMessage" data-bind="text: $data"></span></li>
                        </ol>
                    </div>
                </section>
                <div data-bind="jqElement: '$genericAlertDialog'" title="" style="display: none;">
                    <div>
                        <p class="content">
                        </p>
                    </div>
                </div>
                <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
            </div>
        </div>
    </div>
</form>
